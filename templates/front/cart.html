{% extends 'front/master.html' %}

{% block content %}
    <!-- HERO -->
    <section class="py-4 bg-light border-bottom">
        <div class="container">
            <h4 class="mb-0">Your Cart</h4>
            <small class="text-muted">Review items and proceed to checkout</small>
        </div>
    </section>

    <main class="py-5">
        <div class="container">
            <div class="row">
                <!-- CART LIST -->
                <div class="col-lg-8">

                    <!-- Empty state (toggle with JS if no items) -->
                    <div id="emptyState" class="card empty-state d-none">
                        <div class="card-body text-center py-5">
                            <i class="fa-regular fa-face-frown fa-3x mb-3 text-muted"></i>
                            <h5 class="mb-1">Your cart is empty</h5>
                            <p class="text-muted mb-3">Looks like you haven’t added anything yet.</p>
                            <a href="/shop" class="btn btn-dark">Continue Shopping</a>
                        </div>
                    </div>

                    <!-- Desktop table -->
                    <div class="table-responsive d-none d-md-block">
                        <table class="table align-middle">
                            <thead class="thead-light">
                            <tr>
                                <th scope="col">Product</th>
                                <th scope="col" class="text-center">Qty</th>
                                <th scope="col" class="text-right">Price</th>
                                <th scope="col" class="text-right">Subtotal</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody id="cartTableBody">
                            <!-- Sample row -->
                            <tr data-id="p1">
                                <td>
                                    <div class="media align-items-center">
                                        <img class="cart-thumb mr-3" src="https://picsum.photos/seed/c1/120/120"
                                             alt="Wireless Headset">
                                        <div class="media-body">
                                            <div class="font-weight-semibold">Wireless Headset</div>
                                            <small class="text-muted">Black · Model WH-200</small>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <div class="input-group qty mx-auto">
                                        <div class="input-group-prepend">
                                            <button class="btn btn-outline-secondary btn-sm btn-minus" type="button">
                                                &minus;
                                            </button>
                                        </div>
                                        <input type="number" class="form-control form-control-sm qty-input" value="1"
                                               min="1" step="1">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary btn-sm btn-plus" type="button">
                                                &plus;
                                            </button>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right price"><span class="unit-price" data-price="59.00">$59.00</span>
                                </td>
                                <td class="text-right price"><span class="line-subtotal">$59.00</span></td>
                                <td class="text-right">
                                    <button class="btn btn-link text-danger p-0 btn-remove"><i
                                            class="fa-regular fa-trash-can"></i></button>
                                </td>
                            </tr>

                            <tr data-id="p2">
                                <td>
                                    <div class="media align-items-center">
                                        <img class="cart-thumb mr-3" src="https://picsum.photos/seed/c2/120/120"
                                             alt="Smart Watch Pro">
                                        <div class="media-body">
                                            <div class="font-weight-semibold">Smart Watch Pro</div>
                                            <small class="text-muted">Silver · 42mm</small>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <div class="input-group qty mx-auto">
                                        <div class="input-group-prepend">
                                            <button class="btn btn-outline-secondary btn-sm btn-minus" type="button">
                                                &minus;
                                            </button>
                                        </div>
                                        <input type="number" class="form-control form-control-sm qty-input" value="2"
                                               min="1" step="1">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary btn-sm btn-plus" type="button">
                                                &plus;
                                            </button>
                                        </div>
                                    </div>
                                </td>
                                <td class="text-right price"><span class="unit-price" data-price="129.00">$129.00</span>
                                </td>
                                <td class="text-right price"><span class="line-subtotal">$258.00</span></td>
                                <td class="text-right">
                                    <button class="btn btn-link text-danger p-0 btn-remove"><i
                                            class="fa-regular fa-trash-can"></i></button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Mobile cards -->
                    <div id="cartCards" class="d-md-none">
                        <!-- Card template (mirror of rows) -->
                        <div class="card mb-3" data-id="p1">
                            <div class="card-body">
                                <div class="media">
                                    <img class="cart-thumb mr-3" src="https://picsum.photos/seed/c1/120/120"
                                         alt="Wireless Headset">
                                    <div class="media-body">
                                        <div class="d-flex justify-content-between">
                                            <h6 class="mb-1">Wireless Headset</h6>
                                            <button class="btn btn-link text-danger p-0 btn-remove"><i
                                                    class="fa-regular fa-trash-can"></i></button>
                                        </div>
                                        <small class="text-muted d-block mb-2">Black · Model WH-200</small>
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="input-group qty">
                                                <div class="input-group-prepend">
                                                    <button class="btn btn-outline-secondary btn-sm btn-minus"
                                                            type="button">&minus;
                                                    </button>
                                                </div>
                                                <input type="number" class="form-control form-control-sm qty-input"
                                                       value="1" min="1" step="1">
                                                <div class="input-group-append">
                                                    <button class="btn btn-outline-secondary btn-sm btn-plus"
                                                            type="button">&plus;
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="price"><span class="unit-price"
                                                                         data-price="59.00">$59.00</span></div>
                                                <small class="text-muted">Subtotal: <span
                                                        class="line-subtotal">$59.00</span></small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card mb-3" data-id="p2">
                            <div class="card-body">
                                <div class="media">
                                    <img class="cart-thumb mr-3" src="https://picsum.photos/seed/c2/120/120"
                                         alt="Smart Watch Pro">
                                    <div class="media-body">
                                        <div class="d-flex justify-content-between">
                                            <h6 class="mb-1">Smart Watch Pro</h6>
                                            <button class="btn btn-link text-danger p-0 btn-remove"><i
                                                    class="fa-regular fa-trash-can"></i></button>
                                        </div>
                                        <small class="text-muted d-block mb-2">Silver · 42mm</small>
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="input-group qty">
                                                <div class="input-group-prepend">
                                                    <button class="btn btn-outline-secondary btn-sm btn-minus"
                                                            type="button">&minus;
                                                    </button>
                                                </div>
                                                <input type="number" class="form-control form-control-sm qty-input"
                                                       value="2" min="1" step="1">
                                                <div class="input-group-append">
                                                    <button class="btn btn-outline-secondary btn-sm btn-plus"
                                                            type="button">&plus;
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="price"><span class="unit-price"
                                                                         data-price="129.00">$129.00</span></div>
                                                <small class="text-muted">Subtotal: <span
                                                        class="line-subtotal">$258.00</span></small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div> <!-- /mobile cards -->

                    <!-- Promo -->
                    <div class="card mt-3">
                        <div class="card-body">
                            <form id="promoForm" class="form-inline">
                                <label class="sr-only" for="promo">Promo code</label>
                                <input id="promo" type="text" class="form-control mb-2 mr-sm-2" placeholder="PROMO10">
                                <button type="submit" class="btn btn-outline-dark mb-2">Apply</button>
                                <small id="promoFeedback" class="text-success ml-2 d-none">Promo applied!</small>
                            </form>
                            <small class="text-muted">Example: <code>PROMO10</code> for 10% off (demo).</small>
                        </div>
                    </div>

                </div>

                <!-- SUMMARY -->
                <div class="col-lg-4">
                    <div class="card sticky-summary">
                        <div class="card-body">
                            <h6 class="text-uppercase">Order Summary</h6>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <span>Subtotal</span>
                                <strong id="sumSubtotal">$317.00</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Discount</span>
                                <strong id="sumDiscount">$0.00</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Shipping</span>
                                <strong id="sumShipping">$5.00</strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Tax (10%)</span>
                                <strong id="sumTax">$31.70</strong>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <span>Total</span>
                                <strong id="sumTotal" class="h5 mb-0">$353.70</strong>
                            </div>
                            <a href="/checkout" class="btn btn-dark btn-block mt-3"><i
                                    class="fa-solid fa-lock mr-1"></i>Checkout</a>
                            <a href="/shop" class="btn btn-outline-secondary btn-block">Continue Shopping</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile sticky summary -->
    <div class="mobile-checkout d-md-none bg-white border-top">
        <div class="container py-2">
            <div class="d-flex align-items-center justify-content-between">
                <div>
                    <small class="text-muted d-block">Total</small>
                    <strong id="mobileTotal">$353.70</strong>
                </div>
                <a href="/checkout" class="btn btn-dark btn-sm">Checkout</a>
            </div>
        </div>
    </div>

{% endblock %}
